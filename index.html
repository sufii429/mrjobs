<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MrJobs ‚Äì Medical Representative Jobs in Pakistan</title>
  <meta name="description" content="Find the latest Medical Representative jobs in top Pakistani Pharmaceutical companies. Apply directly with a single WhatsApp click." />
  <meta name="keywords" content="pharma jobs Pakistan, medical representative jobs, pharma sales Lahore, MR jobs Karachi, pharmaceutical careers" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4VMP7HF0K3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-4VMP7HF0K3');
  </script>

  <!-- Global WebSite schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "https://mrjobs.netlify.app/",
    "name": "MrJobs ‚Äì PharmaRep Jobs",
    "description": "Job board for Medical Representative positions in Pakistani Pharmaceutical companies",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://mrjobs.netlify.app/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
<!-- üü¢ Improved Ticker Embed with better height and alignment -->
<div style="width: 100%; background: #edf2f7; display: flex; justify-content: center;">
  <iframe
    src="https://script.google.com/macros/s/AKfycbyC7c_F9ZqA4VE694dSZtn9Ej52iLP9QyGD0OB1kjJhhVApXkqqDJlskP_GeQxOwdSA/exec"
    style="border: none; width: 100%; max-width: 1100px; height: 60px;"
    scrolling="no"
    loading="lazy">
  </iframe>
</div>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
   body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }
    header {
      background: linear-gradient(135deg, #2c6e49 0%, #1a4731 100%);
      color: #fff;
      padding: 2rem;
      text-align: center;
    }
    header h1 {
      margin: 0 0 .5rem;
      font-size: 2.2rem;
    }
    header p {
      max-width: 700px;
      margin: 0 auto 1rem;
      opacity: 0.9;
    }
    main {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 0 20px;
    }
    .filters-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 20px;
    }
    #searchInput {
      flex: 1;
      min-width: 240px;
      padding: 12px 20px;
      border-radius: 50px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    #locationFilter {
      padding: 12px 20px;
      border-radius: 50px;
      border: 1px solid #ccc;
      min-width: 180px;
      font-size: 16px;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 16px;
    }
    #jobCount {
      margin-bottom: 15px;
      font-weight: 600;
      color: #2c6e49;
    }
    #jobListings {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 25px;
    }
    .job-card {
      background: #fff;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      display: flex;
      flex-direction: column;
      border-top: 4px solid #2c6e49;
    }
    .job-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,.12);
    }
    .featured-badge {
      position: absolute;
      top: -10px;
      right: 20px;
      background: #ffc107;
      color: #333;
      padding: 6px 15px;
      border-radius: 20px;
      font-size: .85rem;
      font-weight: 600;
      box-shadow: 0 2px 5px rgba(0,0,0,.1);
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .job-card h3 {
      color: #1a4731;
      margin-bottom: 10px;
      font-size: 1.4rem;
    }
    .company, .location, .salary {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 5px 0;
      color: #555;
    }
    .description {
      margin: 15px 0;
      color: #444;
      line-height: 1.7;
      flex-grow: 1;
    }
    .apply-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: #2c6e49;
      color: white;
      padding: 12px 20px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 500;
      transition: background 0.3s;
      margin-top: 15px;
    }
    .apply-btn:hover {
      background: #1a4731;
    }
    footer {
      text-align: center;
      padding: 30px;
      color: #777;
      border-top: 1px solid #eee;
      background: #fff;
      margin-top: 40px;
    }
    .loading, .error {
      text-align: center;
      padding: 40px;
      grid-column: 1 / -1;
    }
    .loading i {
      color: #2c6e49;
      font-size: 2.5rem;
      margin-bottom: 15px;
      animation: spin 1.5s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @media (max-width: 768px) {
      #jobListings {
        grid-template-columns: 1fr;
      }
      header h1 {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="MrJobs logo" style="height:70px;margin-bottom:10px">
    <h1>MrJobs ‚Äì PharmaRep Jobs</h1>
    <p>Instantly apply to verified Medical Representative, TM & AM positions across Pakistan.</p>
  </header>

  <main>
    <div class="filters-container">
      <input id="searchInput" type="text" placeholder="Search by title, company..." />
      <select id="locationFilter"><option value="">All Locations</option></select>
    </div>

    <div id="jobCount"></div>
    <div id="jobListings"></div>
  </main>

  <footer>
    <p>&copy;¬†2025¬†MrJobs ‚Äì Connecting Medical Sales Professionals with Pakistan's Pharma Industry</p>
  </footer>
<!-- üì® Newsletter Signup (paste after <footer> and before </body>) -->
<section id="newsletter"
         style="max-width:600px;margin:60px auto;padding:30px;border:1px solid #e2e8f0;border-radius:12px;background:#ffffff">
  <h2 style="text-align:center;margin-bottom:20px;color:#1a4731">Subscribe to MrJobs Weekly</h2>

  <form id="subscribeForm">
    <input name="name"  type="text"  placeholder="Your name"  required
           style="width:100%;padding:12px 16px;margin-bottom:12px;border:1px solid #ccc;border-radius:8px">
    <input name="email" type="email" placeholder="Your email" required
           style="width:100%;padding:12px 16px;margin-bottom:12px;border:1px solid #ccc;border-radius:8px">
    <select name="area"
            style="width:100%;padding:12px 16px;margin-bottom:16px;border:1px solid #ccc;border-radius:8px">
      <option value="">Preferred city (optional)</option>
      <option>Lahore</option><option>Karachi</option><option>Faisalabad</option>
      <option>Sargodha</option><option>Jhang</option><option>Chiniot</option>
    </select>

    <button type="submit"
            style="width:100%;padding:12px;font-weight:600;background:#2c6e49;color:#fff;border:none;border-radius:50px">
      Subscribe üì©
    </button>
  </form>

  <p id="subOK"        style="display:none;margin-top:15px;color:#2c6e49;text-align:center">
    ‚úÖ¬†You‚Äôre subscribed! Check your email.
  </p>
  <p id="duplicateMsg" style="display:none;margin-top:15px;color:#e67e22;text-align:center">
    ‚ö†Ô∏è¬†You already subscribed recently. Please wait a few minutes.
  </p>
  <p id="errorMsg"     style="display:none;margin-top:15px;color:#e74c3c;text-align:center">
    ‚ùå¬†Error ‚Äì please try again later.
  </p>
</section>

<script>
  const SUB_URL = "https://script.google.com/macros/s/AKfycbyC77h0v-TUHe6RvTsUG8GZ_-K0JN1dLZd-z8IiQkuN7J4QPTdab0c2XY-xe8-Frri3uA/exec";   // ‚Üê Apps Script /exec link here

  document.getElementById("subscribeForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const fd = new FormData(e.target);

    // hide all messages
    ["subOK","duplicateMsg","errorMsg"].forEach(id => 
      document.getElementById(id).style.display = "none");

    try {
      const res = await fetch(SUB_URL, { method: "POST", body: fd });
      const txt = await res.text();

      if (txt.trim() === "OK") {
        e.target.reset();
        document.getElementById("subOK").style.display = "block";
      } else if (txt.trim() === "DUPLICATE") {
        document.getElementById("duplicateMsg").style.display = "block";
      } else {
        document.getElementById("errorMsg").style.display = "block";
      }
    } catch (err) {
      console.error(err);
      document.getElementById("errorMsg").style.display = "block";
    }
  });
</script>

  <script>
    const API_URL =
      "https://script.google.com/macros/s/AKfycbzkA89WpUCh8F0RExm4cD4CBVM73witHTzUhgBvS9ri-D86kWrwvEe_Zz37FVwc_GL3/exec";

    const jobListings   = document.getElementById("jobListings");
    const jobCount      = document.getElementById("jobCount");
    const searchInput   = document.getElementById("searchInput");
    const locationFilter= document.getElementById("locationFilter");
    let   allJobs       = [];

    /* --- helpers --------------------------------------------------------- */
    function showState(html) {
      jobListings.innerHTML = html;
    }
    function loading() {
      showState("<div class='loading'><i class='fas fa-spinner'></i><p>Loading jobs‚Ä¶</p></div>");
    }
    function errorState() {
      showState(
        `<div class='error'>
           <i class='fas fa-exclamation-triangle'></i>
           <h3>Failed to load jobs</h3>
           <button class='apply-btn' onclick='fetchJobs()'>
             <i class='fas fa-sync-alt'></i> Retry
           </button>
         </div>`
      );
      jobCount.textContent = "connection error";
    }

    /* --- fetch & render -------------------------------------------------- */
    async function fetchJobs() {
      loading();
      try {
        const res  = await fetch(API_URL);
        const data = await res.json();
        allJobs = data;
        populateFilter(data);
        renderJobs(data);
      } catch (err) {
        console.error(err);
        errorState();
      }
    }

    function populateFilter(jobs) {
      locationFilter.innerHTML = "<option value=''>All Locations</option>";
      [...new Set(jobs.map(j => j.location))]
        .sort()
        .forEach(loc => {
          const opt = new Option(loc, loc);
          locationFilter.appendChild(opt);
        });
    }

    function filterJobs() {
      const q   = searchInput.value.toLowerCase();
      const loc = locationFilter.value;
      const list = allJobs.filter(j =>
        (j.title + j.company + j.description).toLowerCase().includes(q) &&
        (!loc || j.location === loc)
      );
      renderJobs(list);
    }

    function renderJobs(jobs) {
      if (!jobs.length) {
        showState("<div class='error'><i class='fas fa-search'></i><p>No matching jobs found.</p></div>");
        jobCount.textContent = "0 jobs";
        return;
      }
      jobListings.innerHTML = "";                     // clear grid
      jobCount.textContent  = `${jobs.length} job${jobs.length>1?"s":""} found`;

      const today = new Date().toISOString().split("T")[0];
      const schemaArr = [];

      jobs.forEach((job, i) => {
        /* card */
        const card = document.createElement("div");
        card.className = "job-card";
        card.innerHTML = `
          ${job.featured ? `<div class="featured-badge"><i class="fas fa-star"></i> Featured</div>` : ""}
          <h3>${job.title}</h3>
          <div class="company"><i class="fas fa-building"></i> ${job.company}</div>
          <div class="location"><i class="fas fa-map-marker-alt"></i> ${job.location}</div>
          <div class="salary"><i class="fas fa-dollar-sign"></i> ${job.salary || "Competitive Salary + Incentives"}</div>
          <div class="description">${job.description}</div>
          <a class="apply-btn" href="${job.applyLink}" target="_blank">
            <i class="fab fa-whatsapp"></i> Apply Now
          </a>`;

        jobListings.appendChild(card);

        /* schema object */
        schemaArr.push({
          "@context": "https://schema.org",
          "@type": "JobPosting",
          "title": job.title,
          "description": job.description,
          "datePosted": today,
          "validThrough": "2025-12-31",
          "employmentType": "FULL_TIME",
          "hiringOrganization": {
            "@type": "Organization",
            "name": job.company,
            "logo": "https://mrjobs.netlify.app/logo.png",
            "sameAs": "https://mrjobs.netlify.app"
          },
          "jobLocation": {
            "@type": "Place",
            "address": {
              "@type": "PostalAddress",
              "addressLocality": job.location,
              "addressCountry": "PK"
            }
          },
          "identifier": {
            "@type": "PropertyValue",
            "name": "MrJobs",
            "value": `MRJ-${1000 + i}`
          }
        });
      });

      /* add single JobPosting schema (replaces any previous) */
      document.getElementById("jobs-schema")?.remove();
      const schemaScript = document.createElement("script");
      schemaScript.id   = "jobs-schema";
      schemaScript.type = "application/ld+json";
      schemaScript.text = JSON.stringify(schemaArr.length === 1 ? schemaArr[0] : schemaArr);
      document.head.appendChild(schemaScript);
    }

    /* --- events & bootstrap --------------------------------------------- */
    searchInput.addEventListener("input", filterJobs);
    locationFilter.addEventListener("change", filterJobs);
    fetchJobs();
  </script>
</body>
</html>
